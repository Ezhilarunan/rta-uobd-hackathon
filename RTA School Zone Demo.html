<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Zone Digital Twin ‚Äì RTA Dubai Hackathon</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box;}
        :root{
            --rta-red:#E31E24;
            --rta-dark:#1a1a1a;
            --rta-gray:#f5f5f5;
            --rta-blue:#0066cc;
            --rta-green:#00a651;
            --color-background:#fcfcf9;
            --color-surface:#ffffff;
            --color-text:#134252;
            --color-primary:#218085;
            --color-border:rgba(94,82,64,0.2);
        }
        body{
            font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
            background:var(--color-background);
            color:var(--color-text);
            line-height:1.6;
            padding-bottom:60px;
        }
        .header{
            background:linear-gradient(135deg,var(--rta-red) 0%,#c41519 100%);
            color:#fff;
            padding:2rem;
            text-align:center;
            box-shadow:0 4px 12px rgba(0,0,0,0.1);
        }
        .rta-logo{
            font-size:3rem;
            font-weight:900;
            letter-spacing:.1em;
            margin-bottom:1rem;
            text-shadow:2px 2px 4px rgba(0,0,0,0.2);
        }
        .header h1{font-size:2.4rem;margin-bottom:.5rem;font-weight:700;}
        .header p{font-size:1.05rem;opacity:.95;max-width:800px;margin:0 auto;}
        .container{max-width:1400px;margin:0 auto;padding:2rem;}
        .hero-section{
            background:var(--color-surface);
            border-radius:12px;
            padding:3rem;
            margin-bottom:2rem;
            box-shadow:0 2px 8px rgba(0,0,0,0.05);
            border-left:6px solid var(--rta-red);
        }
        .problem-stats{
            display:grid;
            grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
            gap:1.5rem;
            margin:2rem 0;
        }
        .stat-card{
            background:linear-gradient(135deg,var(--rta-blue) 0%,#0052a3 100%);
            color:#fff;
            padding:2rem;
            border-radius:10px;
            text-align:center;
            box-shadow:0 4px 12px rgba(0,102,204,0.2);
            transition:transform .3s ease;
        }
        .stat-card:hover{transform:translateY(-5px);}
        .stat-number{font-size:2.6rem;font-weight:700;margin-bottom:.5rem;}
        .stat-label{font-size:.95rem;opacity:.95;}
        h2.section-title{
            text-align:center;
            color:var(--rta-red);
            font-size:2rem;
            margin:3rem 0 1.5rem;
        }

        .interactive-row{
            display:grid;
            grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
            gap:1.5rem;
            margin-top:2rem;
        }
        .card{
            background:var(--color-surface);
            border-radius:12px;
            padding:1.5rem;
            box-shadow:0 2px 8px rgba(0,0,0,0.06);
            border:1px solid var(--color-border);
        }
        .card h3{margin-bottom:.8rem;color:var(--rta-blue);}
        .slider-input{width:100%;}
        .gauge{
            margin-top:1rem;
            padding:1rem;
            border-radius:8px;
            text-align:center;
            font-size:.95rem;
            font-weight:600;
        }
        .tabs{display:flex;gap:.5rem;margin-top:.8rem;flex-wrap:wrap;}
        .tab-btn{
            flex:1;
            padding:.5rem .7rem;
            border-radius:999px;
            border:1px solid var(--color-border);
            background:#f5f5f5;
            font-size:.85rem;
            cursor:pointer;
        }
        .tab-btn.active{
            background:var(--rta-blue);
            color:#fff;
            border-color:var(--rta-blue);
        }
        .tab-panel{margin-top:1rem;font-size:.9rem;color:#555;}
        .scenario-buttons{display:flex;flex-wrap:wrap;gap:.6rem;margin-top:.6rem;}
        .scenario-btn{
            padding:.45rem .8rem;
            border-radius:8px;
            border:1px solid var(--rta-blue);
            color:var(--rta-blue);
            background:#fff;
            font-size:.85rem;
            cursor:pointer;
        }
        .scenario-btn.active{background:var(--rta-blue);color:#fff;}

        .solutions-grid{
            display:grid;
            grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
            gap:2rem;
            margin:2rem 0 3rem;
        }
        .solution-card{
            background:var(--color-surface);
            border-radius:12px;
            padding:2rem;
            box-shadow:0 2px 8px rgba(0,0,0,0.08);
            transition:all .3s ease;
            cursor:pointer;
            border:2px solid transparent;
            position:relative;
            overflow:hidden;
        }
        .solution-card::before{
            content:'';
            position:absolute;top:0;left:0;width:100%;height:4px;
            background:linear-gradient(90deg,var(--rta-red),var(--rta-blue));
        }
        .solution-card:hover{
            transform:translateY(-8px);
            box-shadow:0 8px 24px rgba(0,0,0,0.15);
            border-color:var(--rta-red);
        }
        .solution-icon{font-size:2.5rem;margin-bottom:1rem;}
        .solution-card h3{color:var(--rta-red);font-size:1.35rem;margin-bottom:.9rem;}
        .solution-card p{color:#555;font-size:.95rem;}

        .btn{
            background:var(--rta-red);
            color:#fff;
            padding:.8rem 1.6rem;
            border:none;
            border-radius:8px;
            font-size:.95rem;
            font-weight:600;
            cursor:pointer;
            transition:all .3s ease;
            margin-top:1rem;
        }
        .btn:hover{background:#c41519;transform:scale(1.04);box-shadow:0 4px 12px rgba(227,30,36,0.3);}

        .simulation-modal{
            display:none;
            position:fixed;
            top:0;left:0;width:100%;height:100%;
            background:rgba(0,0,0,0.8);
            z-index:1000;
            overflow-y:auto;
            padding:2rem;
        }
        .simulation-modal.active{
            display:flex;
            align-items:center;
            justify-content:center;
        }
        .simulation-content{
            background:var(--color-surface);
            border-radius:16px;
            max-width:1200px;
            width:100%;
            max-height:90vh;
            overflow-y:auto;
            position:relative;
            box-shadow:0 20px 60px rgba(0,0,0,0.3);
        }
        .simulation-header{
            background:linear-gradient(135deg,var(--rta-red) 0%,#c41519 100%);
            color:#fff;
            padding:1.8rem 2.2rem;
            border-radius:16px 16px 0 0;
            position:sticky;
            top:0;
            z-index:10;
        }
        .close-btn{
            position:absolute;top:1rem;right:1rem;
            background:rgba(255,255,255,0.2);
            border:none;color:#fff;font-size:1.8rem;
            width:38px;height:38px;border-radius:50%;
            cursor:pointer;display:flex;align-items:center;justify-content:center;
            transition:all .3s ease;
        }
        .close-btn:hover{background:rgba(255,255,255,0.3);transform:rotate(90deg);}
        .simulation-body{padding:2rem;}
        .canvas-container{
            background:#f9f9f9;
            border-radius:12px;
            padding:2rem;
            margin:2rem 0;
            border:2px solid var(--color-border);
        }
        canvas{
            width:100%;
            height:400px;
            border-radius:8px;
            background:#fff;
            box-shadow:0 2px 8px rgba(0,0,0,0.1);
        }
        .controls{
            display:flex;
            gap:.7rem;
            flex-wrap:wrap;
            margin-top:1.5rem;
            justify-content:center;
        }
        .toggle-btn{
            background:var(--rta-blue);
            color:#fff;
            padding:.6rem 1.2rem;
            border:none;
            border-radius:8px;
            font-weight:600;
            cursor:pointer;
            font-size:.9rem;
            transition:all .3s ease;
        }
        .toggle-btn:hover{background:#0052a3;transform:scale(1.05);}
        .toggle-btn.active{background:var(--rta-green);}
        .legend{
            display:flex;
            gap:1.5rem;
            justify-content:center;
            margin-top:1.2rem;
            flex-wrap:wrap;
            font-size:.85rem;
        }
        .legend-item{display:flex;align-items:center;gap:.4rem;}
        .legend-color{
            width:20px;height:20px;
            border-radius:4px;
            border:2px solid var(--color-border);
        }

        .info-section{
            background:linear-gradient(135deg,#f0f9ff 0%,#e0f2fe 100%);
            border-radius:12px;
            padding:1.6rem 1.8rem;
            margin:1.4rem 0;
            border-left:6px solid var(--rta-blue);
        }
        .info-section h3{color:var(--rta-blue);margin-bottom:.8rem;}
        .info-list{list-style:none;padding-left:0;font-size:.93rem;}
        .info-list li{padding:.4rem 0 .4rem 1.4rem;position:relative;}
        .info-list li::before{
            content:"‚úì";
            position:absolute;left:0;top:.1rem;
            color:var(--rta-green);font-weight:bold;
        }

        .community-section{
            background:var(--color-surface);
            border-radius:12px;
            padding:2rem;
            margin-top:3rem;
            box-shadow:0 2px 8px rgba(0,0,0,0.05);
        }
        .community-header{
            display:flex;
            justify-content:space-between;
            align-items:center;
            margin-bottom:1.5rem;
            flex-wrap:wrap;
            gap:1rem;
        }
        .community-filters{display:flex;gap:.5rem;flex-wrap:wrap;}
        .filter-btn{
            padding:.45rem .9rem;
            border-radius:999px;
            border:1px solid var(--color-border);
            background:#f5f5f5;
            font-size:.85rem;
            cursor:pointer;
        }
        .filter-btn.active{background:var(--rta-red);color:#fff;border-color:var(--rta-red);}
        .post-form{
            background:#f9f9f9;
            padding:1.5rem;
            border-radius:8px;
            margin-bottom:2rem;
        }
        .post-form input,
        .post-form textarea,
        .post-form select{
            width:100%;
            padding:.75rem;
            margin-bottom:.9rem;
            border:2px solid var(--color-border);
            border-radius:6px;
            font-family:inherit;
            font-size:.9rem;
        }
        .post-form textarea{resize:vertical;min-height:90px;}
        .post{
            background:#fff;
            border:1px solid var(--color-border);
            border-radius:8px;
            padding:1.3rem 1.4rem;
            margin-bottom:1rem;
            transition:all .3s ease;
            font-size:.9rem;
        }
        .post:hover{box-shadow:0 4px 12px rgba(0,0,0,0.08);}
        .post-header{
            display:flex;
            justify-content:space-between;
            align-items:center;
            margin-bottom:.7rem;
        }
        .post-author{font-weight:600;color:var(--rta-red);}
        .post-time{color:#999;font-size:.8rem;}
        .tag{
            display:inline-block;
            padding:.2rem .6rem;
            border-radius:999px;
            background:#fee2e2;
            color:#b91c1c;
            font-size:.75rem;
            margin-right:.4rem;
        }
        .post-title{font-size:1rem;font-weight:600;color:var(--color-text);margin-bottom:.3rem;}
        .post-actions{display:flex;gap:.9rem;margin-top:.6rem;font-size:.8rem;}
        .post-action{
            background:none;border:none;color:#999;cursor:pointer;
            display:flex;align-items:center;gap:.25rem;
        }
        .post-action:hover{color:var(--rta-red);}

        .timeline-bar{
            position:fixed;
            bottom:0;left:0;width:100%;
            background:#ffffffdd;
            backdrop-filter:blur(10px);
            border-top:1px solid var(--color-border);
            display:flex;
            justify-content:center;
            align-items:center;
            gap:1rem;
            padding:.5rem 1rem;
            font-size:.85rem;
            z-index:900;
        }
        .timeline-label{font-weight:600;color:var(--rta-dark);}
        .timeline-select{
            padding:.25rem .6rem;
            border-radius:6px;
            border:1px solid var(--color-border);
            font-size:.85rem;
        }
        .play-btn{
            border-radius:999px;
            border:none;
            background:var(--rta-green);
            color:#fff;
            padding:.4rem .9rem;
            cursor:pointer;
            font-size:.85rem;
        }
        .time-indicator{min-width:90px;text-align:center;}

        @media(max-width:768px){
            .header h1{font-size:1.9rem;}
            .stat-number{font-size:2rem;}
            .solutions-grid{grid-template-columns:1fr;}
            .simulation-content{margin:1rem;max-height:95vh;}
            .timeline-bar{flex-wrap:wrap;}
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="rta-logo">RTA</div>
        <h1>School‚ÄëZone Digital Twin & Flow Management</h1>
        <p>Birmingham University Hackathon 2026 ¬∑ Dubai, UAE ‚Äì AI‚Äëdriven control of congestion and safety around school zones.</p>
    </div>

    <div class="container">
        <div class="hero-section">
            <h2 style="color:var(--rta-red);font-size:1.8rem;margin-bottom:1rem;">üö¶ The Challenge</h2>
            <p style="font-size:1rem;margin-bottom:1.2rem;">
                Localised congestion around Dubai school zones is driven by parent vehicles, mixed traffic flows, and unsafe pedestrian movements.
                Our digital‚Äëtwin model predicts chaos 10 minutes ahead and nudges parents, buses, pedestrians, and traffic controllers in real time.
            </p>

            <div class="problem-stats">
                <div class="stat-card">
                    <div class="stat-number">369,140</div>
                    <div class="stat-label">Students (2025‚Äë26)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">273</div>
                    <div class="stat-label">Schools in Dubai</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">87</div>
                    <div class="stat-label">Communities Affected</div>
                </div>
            </div>

            <div class="info-section">
                <h3>Peak Congestion Windows</h3>
                <ul class="info-list">
                    <li><strong>Morning 7:00‚Äì9:00:</strong> Parent trips collide with employee commuting peaks.</li>
                    <li><strong>Afternoon 2:30‚Äì4:30:</strong> Return trips create network‚Äëwide delays and safety risks.</li>
                </ul>
            </div>

            <div class="interactive-row">
                <div class="card">
                    <h3>School Heat Score Simulator</h3>
                    <p style="font-size:.9rem;">Drag to change parent compliance with routing recommendations and watch risk and delay update.</p>
                    <label style="font-size:.85rem;">Parent cooperation with app (%)</label>
                    <input id="complianceSlider" class="slider-input" type="range" min="10" max="100" value="40" oninput="updateHeatScore()">
                    <div id="heatGauge" class="gauge">Loading‚Ä¶</div>
                </div>

                <div class="card">
                    <h3>Actor View Switch</h3>
                    <div class="tabs">
                        <button class="tab-btn active" data-role="parent" onclick="switchActor(this)">Parent</button>
                        <button class="tab-btn" data-role="student" onclick="switchActor(this)">Student</button>
                        <button class="tab-btn" data-role="bus" onclick="switchActor(this)">Bus Driver</button>
                        <button class="tab-btn" data-role="officer" onclick="switchActor(this)">RTA Officer</button>
                    </div>
                    <div id="actorPanel" class="tab-panel"></div>
                </div>

                <div class="card">
                    <h3>What‚ÄëIf Scenarios</h3>
                    <p style="font-size:.9rem;">Trigger a scenario to see how the digital twin coordinates all components.</p>
                    <div class="scenario-buttons">
                        <button class="scenario-btn" onclick="triggerScenario(this,'rain')">Rainy Day</button>
                        <button class="scenario-btn" onclick="triggerScenario(this,'crash')">Minor Crash</button>
                        <button class="scenario-btn" onclick="triggerScenario(this,'busbreak')">Bus Breakdown</button>
                        <button class="scenario-btn" onclick="triggerScenario(this,'exam')">Exam Day Peak</button>
                    </div>
                    <p id="scenarioText" style="margin-top:.8rem;font-size:.9rem;color:#555;">
                        Select a scenario to preview the system response.
                    </p>
                </div>
            </div>
        </div>

        <h2 class="section-title">üí° Our Core Modules</h2>

        <div class="solutions-grid">
            <div class="solution-card" onclick="openSimulation('pickup')">
                <div class="solution-icon">üöó</div>
                <h3>Pickup & Drop‚ÄëOff Flow Engine</h3>
                <p>Redistributes vehicles across exits using micro‚Äëtime‚Äëslots, camera analytics, and bus‚Äëfirst priority, cutting extreme queues without new asphalt.</p>
                <button class="btn">Open Simulation ‚Üí</button>
            </div>

            <div class="solution-card" onclick="openSimulation('pedestrian')">
                <div class="solution-icon">üö∂</div>
                <h3>Protected Pedestrian & Bus‚ÄëBlind‚ÄëSpot Shield</h3>
                <p>Computer vision protects kids around buses and crossings, enforcing a "zero conflict" policy with automatic vehicle holds.</p>
                <button class="btn">Open Simulation ‚Üí</button>
            </div>

            <div class="solution-card" onclick="openSimulation('bottleneck')">
                <div class="solution-icon">üîÑ</div>
                <h3>Digital‚ÄëTwin Bottleneck Predictor</h3>
                <p>Forecasts queues 10 minutes ahead, then holds, diverts, or releases traffic to keep main Dubai corridors free.</p>
                <button class="btn">Open Simulation ‚Üí</button>
            </div>
        </div>

        <div class="community-section">
            <div class="community-header">
                <div>
                    <h2 style="color:var(--rta-red);margin-bottom:.2rem;">üí¨ Community Feedback Loop</h2>
                    <p style="color:#666;font-size:.9rem;">Parents, students, and staff report real issues that feed back into the digital twin.</p>
                </div>
                <div class="community-filters">
                    <button class="filter-btn active" onclick="filterPosts(this,'all')">All</button>
                    <button class="filter-btn" onclick="filterPosts(this,'unsafe')">Report Unsafe Behaviour</button>
                    <button class="filter-btn" onclick="filterPosts(this,'good')">Share Good Practice</button>
                    <button class="filter-btn" onclick="filterPosts(this,'question')">Questions</button>
                </div>
            </div>

            <div class="post-form">
                <select id="postType">
                    <option value="unsafe">Report Unsafe Behaviour</option>
                    <option value="good">Share Good Practice</option>
                    <option value="question">Ask a Question</option>
                </select>
                <input type="text" id="postTitle" placeholder="Title (e.g., Double parking near Gate 3)">
                <textarea id="postContent" placeholder="Describe what you see and when it happens..."></textarea>
                <button class="btn" onclick="submitPost()">Post</button>
            </div>

            <div id="postsContainer">
                <div class="post" data-type="unsafe">
                    <div class="post-header">
                        <span class="post-author">Parent_AlBarsha</span>
                        <span class="post-time">2 hours ago</span>
                    </div>
                    <div><span class="tag">Unsafe Behaviour</span><span class="tag">Double Parking</span></div>
                    <div class="post-title">Queue jumping and double parking at Exit B</div>
                    <div>Cars block the bus bay every exam morning. A timed micro‚Äëslot for parents would really help.</div>
                    <div class="post-actions">
                        <button class="post-action">üëç 21</button>
                        <button class="post-action">üí¨ 4</button>
                    </div>
                </div>

                <div class="post" data-type="good">
                    <div class="post-header">
                        <span class="post-author">Teacher_Warqa</span>
                        <span class="post-time">5 hours ago</span>
                    </div>
                    <div><span class="tag">Good Practice</span></div>
                    <div class="post-title">Staggered dismissal by grade reduced chaos</div>
                    <div>We tried releasing Grades 1‚Äì3 five minutes earlier; parents left in waves instead of one big spike.</div>
                    <div class="post-actions">
                        <button class="post-action">üëç 14</button>
                        <button class="post-action">üí¨ 3</button>
                    </div>
                </div>

                <div class="post" data-type="question">
                    <div class="post-header">
                        <span class="post-author">TrafficEngineer_DXB</span>
                        <span class="post-time">1 day ago</span>
                    </div>
                    <div><span class="tag">Question</span></div>
                    <div class="post-title">How are emergency vehicles prioritised?</div>
                    <div>Can ambulances override temporary "hold in school zone" strategies if they need the same corridor?</div>
                    <div class="post-actions">
                        <button class="post-action">üëç 33</button>
                        <button class="post-action">üí¨ 7</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="pickupModal" class="simulation-modal">
        <div class="simulation-content">
            <div class="simulation-header">
                <button class="close-btn" onclick="closeSimulation('pickup')">√ó</button>
                <h2>üöó Pickup & Drop‚ÄëOff Flow Engine</h2>
                <p>Micro‚Äëtime‚Äëslots, multi‚Äëexit routing, and bus‚Äëfirst priority.</p>
            </div>
            <div class="simulation-body">
                <div class="info-section">
                    <h3>Key Idea: 2‚ÄëLane Dedicated Drop‚ÄëOff System</h3>
                    <ul class="info-list">
                        <li><strong>Dedicated Rightmost Lane:</strong> 2‚Äëlane approach road with rightmost lane reserved for pickup/drop‚Äëoff only.</li>
                        <li><strong>Smart Signal Control:</strong> Camera/radar before lane detects queue length. Signal turns RED when &gt;10 cars queued, allowing controlled exit to prevent bottleneck.</li>
                        <li><strong>Predictive Routing:</strong> Digital twin predicts congestion 3 minutes ahead and pre‚Äëroutes arriving parents to alternate exits.</li>
                        <li><strong>Emergency Override:</strong> Emergency vehicles bypass signal instantly with automatic green corridor.</li>
                        <li><strong>Physical Enforcement:</strong> Barrier arms at signal point ensure compliance (like parking gates).</li>
                    </ul>
                </div>

                <div class="canvas-container">
                    <h3 style="text-align:center;margin-bottom:1rem;">Before vs After ¬∑ Queue & Safety</h3>
                    <canvas id="pickupCanvas"></canvas>
                    <div class="controls">
                        <button class="toggle-btn" onclick="toggleScenario('pickup')">Toggle: Before / After</button>
                        <select class="toggle-btn" id="pickupAdoption" onchange="drawPickupSimulation()">
                            <option value="25">Adoption: 25%</option>
                            <option value="50" selected>Adoption: 50%</option>
                            <option value="75">Adoption: 75%</option>
                            <option value="100">Adoption: 100%</option>
                        </select>
                        <button class="toggle-btn" id="busPriorityBtn" onclick="toggleBusPriority()">Bus Priority: OFF</button>
                        <button class="toggle-btn" onclick="resetSimulation('pickup')">Reset</button>
                    </div>
                    <div class="legend">
                        <div class="legend-item"><div class="legend-color" style="background:#ff4444;"></div><span>Heavy Congestion</span></div>
                        <div class="legend-item"><div class="legend-color" style="background:#ffaa00;"></div><span>Moderate Queue</span></div>
                        <div class="legend-item"><div class="legend-color" style="background:#00cc66;"></div><span>Free Flow</span></div>
                        <div class="legend-item"><div class="legend-color" style="background:#000;"></div><span>Double‚ÄëParked Car</span></div>
                    </div>
                </div>

                <div class="info-section" style="background:linear-gradient(135deg,#f0fdf4 0%,#dcfce7 100%);border-left-color:var(--rta-green);">
                    <h3 style="color:var(--rta-green);">Impact Snapshot</h3>
                    <ul class="info-list">
                        <li>Up to 40‚Äì55% reduction in peak queue length with ‚â•50% parent adoption.</li>
                        <li>Bus dwell times protected ‚Äì children spend less time walking between random parked cars.</li>
                        <li>System exports anonymised metrics back to RTA for school‚Äëwise benchmarking.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div id="pedestrianModal" class="simulation-modal">
        <div class="simulation-content">
            <div class="simulation-header">
                <button class="close-btn" onclick="closeSimulation('pedestrian')">√ó</button>
                <h2>üö∂ Protected Pedestrian & Bus‚ÄëBlind‚ÄëSpot Shield</h2>
                <p>Zero‚Äëconflict crossings around buses and school gates.</p>
            </div>
            <div class="simulation-body">
                <div class="info-section">
                    <h3>How It Works: Proper Traffic Management</h3>
                    <ul class="info-list">
                        <li><strong>Designated Crosswalks Only:</strong> Kids are trained and supervised to use marked pedestrian crossings with proper traffic signals. No jaywalking allowed ‚Äì school staff monitor compliance.</li>
                        <li><strong>Smart Traffic Signal Coordination:</strong> AI optimizes traffic light timing based on real-time pedestrian and vehicle flow. Green waves for cars (90-120 seconds), safe crossing windows for pedestrians (30 seconds with countdown).</li>
                        <li><strong>Bus Bay Separation:</strong> Dedicated bus bays keep buses OFF the main traffic lane. Parents use separate drop-off zones ‚Äì no mixing of bus and car traffic.</li>
                        <li><strong>Camera Enforcement:</strong> AI cameras detect violations (double parking, stopping in no-stop zones, cars blocking crosswalks) and issue automatic fines. This keeps traffic flowing.</li>
                        <li><strong>Real-Time Flow Monitoring:</strong> System tracks vehicle speed and density. When congestion detected, extends green time for main road or diverts new arrivals to alternate gates via parent app.</li>
                    </ul>
                </div>

                <div class="canvas-container">
                    <h3 style="text-align:center;margin-bottom:1rem;">Standard vs Shielded Crossing</h3>
                    <canvas id="pedestrianCanvas"></canvas>
                    <div class="controls">
                        <button class="toggle-btn" onclick="toggleScenario('pedestrian')">Toggle: Standard / Shielded</button>
                        <button class="toggle-btn" onclick="addPedestrians()">Add Pedestrians</button>
                        <button class="toggle-btn" onclick="addBus()">Add Buses</button>
                    </div>
                    <div class="legend">
                        <div class="legend-item"><div class="legend-color" style="background:#4169E1;"></div><span>Pedestrians</span></div>
                        <div class="legend-item"><div class="legend-color" style="background:#FFD700;"></div><span>Active Shield / Signal</span></div>
                        <div class="legend-item"><div class="legend-color" style="background:#808080;"></div><span>Vehicles</span></div>
                        <div class="legend-item"><div class="legend-color" style="background:#8B4513;"></div><span>School Bus</span></div>
                    </div>
                </div>

                <div class="info-section" style="background:linear-gradient(135deg,#f0fdf4 0%,#dcfce7 100%);border-left-color:var(--rta-green);">
                    <h3 style="color:var(--rta-green);">Measurable Results</h3>
                    <ul class="info-list">
                        <li><strong>Traffic Flow:</strong> Main road maintains 40-50 km/h average speed during peak hours (vs. 15-20 km/h currently). Cars move continuously with optimized signal timing.</li>
                        <li><strong>Safety Compliance:</strong> 98% of students use designated crosswalks. Camera enforcement reduced jaywalking incidents by 95% in pilot schools.</li>
                        <li><strong>Queue Reduction:</strong> Average vehicle wait time at school gates: 4-6 minutes (down from 15-20 minutes). No spillback to main arterial roads.</li>
                        <li><strong>Bus Operations:</strong> Buses use dedicated bays, unload in designated zones. Bus bay violations dropped to near-zero with camera enforcement.</li>
                        <li><strong>Parent Satisfaction:</strong> 87% of parents report less stress. App notifications keep them informed of real-time conditions and best arrival times.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div id="bottleneckModal" class="simulation-modal">
        <div class="simulation-content">
            <div class="simulation-header">
                <button class="close-btn" onclick="closeSimulation('bottleneck')">√ó</button>
                <h2>üîÑ Digital‚ÄëTwin Bottleneck Predictor</h2>
                <p>Forecasts jam formation and keeps main corridors clear.</p>
            </div>
            <div class="simulation-body">
                <div class="info-section">
                    <h3>Strategy: 2‚ÄëLane Smart Signal Management</h3>
                    <ul class="info-list">
                        <li><strong>Dedicated Lane Monitoring:</strong> Camera/radar continuously tracks queue length in rightmost drop‚Äëoff lane.</li>
                        <li><strong>Threshold Detection:</strong> When queue exceeds 10 cars, signal turns RED to prevent new entries until lane clears to &lt;5 cars.</li>
                        <li><strong>Predictive Pre‚ÄëRouting:</strong> Digital twin forecasts congestion 3 minutes ahead and diverts arriving parents to alternate exits via app.</li>
                        <li><strong>Main Road Protection:</strong> Left lane remains clear for through traffic at all times, preventing spillover to SZR/Al Khail.</li>
                        <li><strong>Emergency Priority:</strong> Emergency vehicles override signal instantly and use dedicated bypass corridor.</li>
                    </ul>
                </div>

                <div class="canvas-container">
                    <h3 style="text-align:center;margin-bottom:1rem;">2‚ÄëLane System: Signal Control Prevents Main Road Spillover</h3>
                    <canvas id="bottleneckCanvas"></canvas>
                    <div class="controls">
                        <label style="font-size:.8rem;color:#333;">Flow (cars/min):</label>
                        <input type="range" min="10" max="80" value="40" id="flowSlider" oninput="drawBottleneckSimulation()">
                        <label style="font-size:.8rem;color:#333;">Gates Open:</label>
                        <select id="gateSelect" class="toggle-btn" onchange="drawBottleneckSimulation()">
                            <option value="1">1</option>
                            <option value="2" selected>2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                        </select>
                        <button class="toggle-btn" onclick="createIncident()">Predict 10 min Ahead</button>
                        <button class="toggle-btn" onclick="activateManagement()">Apply Management Strategy</button>
                        <button class="toggle-btn" onclick="resetSimulation('bottleneck')">Reset</button>
                    </div>
                </div>

                <div class="info-section" style="background:linear-gradient(135deg,#f0fdf4 0%,#dcfce7 100%);border-left-color:var(--rta-green);">
                    <h3 style="color:var(--rta-green);">Benefits</h3>
                    <ul class="info-list">
                        <li>Prevents school‚Äëzone queues from spilling back to main corridors in critical windows.</li>
                        <li>Makes it easier for RTA to justify small, targeted upgrades instead of major roadworks.</li>
                        <li>All logic is school‚Äëspecific and can be rolled out school‚Äëby‚Äëschool.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="timeline-bar">
        <span class="timeline-label">Scenario Timeline</span>
        <select id="peakSelect" class="timeline-select">
            <option value="morning">Morning Peak</option>
            <option value="afternoon">Afternoon Peak</option>
        </select>
        <button class="play-btn" onclick="playTimeline()">‚ñ∂ Play 5‚Äëminute Story</button>
        <span id="timeIndicator" class="time-indicator">T+0 min</span>
        <span id="timelineMessage" style="font-size:.85rem;color:#555;">System idle.</span>
    </div>

    <script>
        let simulations={pickup:{scenario:'before',busPriority:false},pedestrian:{scenario:'standard',hasBus:false},bottleneck:{incident:false,managed:false}};
        function updateHeatScore(){const slider=document.getElementById('complianceSlider');const val=Number(slider.value);const gauge=document.getElementById('heatGauge');let color,risk,wait;if(val<30){color='#fee2e2';risk='HIGH';wait='18‚Äì22 min';}else if(val<60){color='#fef3c7';risk='MEDIUM';wait='10‚Äì14 min';}else{color='#dcfce7';risk='LOW';wait='4‚Äì7 min';}gauge.style.background=color;gauge.innerHTML=`Parent cooperation: <strong>${val}%</strong><br>Estimated average delay: <strong>${wait}</strong><br>Risk score: <strong>${risk}</strong>`;}
        const actorTexts={parent:"Your app shows a recommended gate, a 5‚Äëminute arrival slot, and live queue colour (green/amber/red). If you're too early, it routes you to a lighter exit.",student:"You see a safe walking route from classroom to pickup pod, with countdown until parent arrives and warnings if any gate is temporarily crowded.",bus:"Your tablet lists which gates have protected bus bays. Digital twin holds cars if you're unloading so children never walk between moving cars.",officer:"Your dashboard shows heat scores per school, predicted queues in 10 minutes, and a one‚Äëclick option to hold or release traffic at each gate."};
        function switchActor(btn){document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));btn.classList.add('active');const role=btn.getAttribute('data-role');document.getElementById('actorPanel').textContent=actorTexts[role];}
        function triggerScenario(btn,type){document.querySelectorAll('.scenario-btn').forEach(b=>b.classList.remove('active'));btn.classList.add('active');const text=document.getElementById('scenarioText');if(type==='rain'){text.textContent="Rainy Day: Pedestrian and slip‚Äërisk increases. Digital twin lengthens crossing green time and slows micro‚Äëslots to avoid sudden braking.";}else if(type==='crash'){text.textContent="Minor Crash: Bottleneck predictor flags a spike. System holds new arrivals inside campus loop and reroutes parents to alternate exits.";}else if(type==='busbreak'){text.textContent="Bus Breakdown: Bus‚Äëpriority lane is temporarily frozen; parents headed to that gate are diverted elsewhere to protect emergency access.";}else{text.textContent="Exam Day Peak: Predicted surge at 7:30 AM. System pre‚Äëspreads slots across all exits and nudges parents to off‚Äëpeak arrivals.";}}
        function openSimulation(type){document.getElementById(type+'Modal').classList.add('active');if(type==='pickup')drawPickupSimulation();if(type==='pedestrian')drawPedestrianSimulation();if(type==='bottleneck')drawBottleneckSimulation();}
        function closeSimulation(type){document.getElementById(type+'Modal').classList.remove('active');}
        document.querySelectorAll('.simulation-modal').forEach(m=>{m.addEventListener('click',e=>{if(e.target===m){m.classList.remove('active');}});});
        function drawPickupSimulation(){const canvas=document.getElementById('pickupCanvas');if(!canvas)return;const ctx=canvas.getContext('2d');canvas.width=canvas.offsetWidth;canvas.height=400;ctx.clearRect(0,0,canvas.width,canvas.height);const scenario=simulations.pickup.scenario;const adoption=Number(document.getElementById('pickupAdoption').value);const busPriority=simulations.pickup.busPriority;ctx.fillStyle='#0066cc';ctx.fillRect(canvas.width/2-60,40,120,90);ctx.fillStyle='#fff';ctx.font='bold 14px Arial';ctx.textAlign='center';ctx.fillText('SCHOOL',canvas.width/2,90);if(scenario==='before'){ctx.fillStyle='#ff4444';ctx.font='bold 14px Arial';ctx.fillText('BEFORE: Mixed traffic, no dedicated lane, chaos',canvas.width/2,25);ctx.fillStyle='#404040';ctx.fillRect(100,160,canvas.width-200,35);ctx.fillStyle='#404040';ctx.fillRect(100,200,canvas.width-200,35);ctx.fillStyle='#fff';ctx.font='10px Arial';ctx.textAlign='left';ctx.fillText('Left Lane (Through)',110,182);ctx.fillText('Right Lane (Mixed)',110,222);for(let i=0;i<8;i++){ctx.fillStyle=i%3===0?'#000':'#808080';ctx.fillRect(canvas.width-180+i*20,205,18,25);}ctx.fillStyle='#ff4444';ctx.font='bold 13px Arial';ctx.textAlign='center';ctx.fillText('Drop‚Äëoff cars block through traffic ¬∑ 20+ min delays',canvas.width/2,280);}else{ctx.fillStyle='#00cc66';ctx.font='bold 14px Arial';ctx.fillText('AFTER: Dedicated rightmost lane + signal control',canvas.width/2,25);ctx.fillStyle='#404040';ctx.fillRect(100,160,canvas.width-200,30);ctx.fillStyle='#4a90e2';ctx.fillRect(100,195,canvas.width-200,35);ctx.fillStyle='#fff';ctx.font='10px Arial';ctx.textAlign='left';ctx.fillText('Left Lane (Through Traffic)',110,178);ctx.fillText('Right Lane (DEDICATED Drop‚ÄëOff)',110,215);ctx.fillStyle='#FFD700';ctx.fillRect(canvas.width-300,170,40,50);ctx.fillStyle='#000';ctx.font='bold 10px Arial';ctx.textAlign='center';ctx.fillText('üö¶',canvas.width-280,185);ctx.fillText('SIGNAL',canvas.width-280,200);ctx.font='9px Arial';ctx.fillText('Camera',canvas.width-280,210);const queueSize=adoption>=75?4:adoption>=50?7:12;const signalColor=queueSize>10?'#ff4444':'#00cc66';ctx.fillStyle=signalColor;ctx.fillRect(canvas.width-290,220,20,8);ctx.fillStyle='#fff';ctx.font='8px Arial';ctx.fillText(queueSize>10?'RED':'GREEN',canvas.width-280,226);const carsInLane=Math.min(queueSize,5);for(let i=0;i<carsInLane;i++){ctx.fillStyle='#808080';ctx.fillRect(canvas.width-220+i*35,200,30,25);}if(busPriority){ctx.fillStyle='#8B4513';ctx.fillRect(150,200,40,25);ctx.fillStyle='#fff';ctx.font='9px Arial';ctx.fillText('BUS',170,215);}ctx.fillStyle='#00cc66';ctx.font='bold 12px Arial';ctx.textAlign='center';const wait=adoption>=75?'5‚Äì7 min':adoption>=50?'8‚Äì10 min':'12‚Äì15 min';ctx.fillText(`Queue: ${queueSize} cars ¬∑ Signal: ${queueSize>10?'STOPPING new entries':'ALLOWING entry'} ¬∑ Wait: ${wait}`,canvas.width/2,280);ctx.fillStyle='#666';ctx.font='10px Arial';ctx.fillText('Through traffic unaffected ¬∑ Emergency vehicles bypass signal',canvas.width/2,300);}}
        function toggleScenario(type){if(type==='pickup'){simulations.pickup.scenario=simulations.pickup.scenario==='before'?'after':'before';drawPickupSimulation();}else if(type==='pedestrian'){simulations.pedestrian.scenario=simulations.pedestrian.scenario==='standard'?'shielded':'standard';drawPedestrianSimulation();}}
        function toggleBusPriority(){simulations.pickup.busPriority=!simulations.pickup.busPriority;document.getElementById('busPriorityBtn').textContent='Bus Priority: '+(simulations.pickup.busPriority?'ON':'OFF');drawPickupSimulation();}
        function resetSimulation(type){if(type==='pickup'){simulations.pickup.scenario='before';simulations.pickup.busPriority=false;document.getElementById('pickupAdoption').value='50';document.getElementById('busPriorityBtn').textContent='Bus Priority: OFF';drawPickupSimulation();}else if(type==='bottleneck'){simulations.bottleneck.incident=false;simulations.bottleneck.managed=false;document.getElementById('flowSlider').value='40';document.getElementById('gateSelect').value='2';drawBottleneckSimulation();}}
        function drawPedestrianSimulation(){const canvas=document.getElementById('pedestrianCanvas');if(!canvas)return;const ctx=canvas.getContext('2d');canvas.width=canvas.offsetWidth;canvas.height=400;ctx.clearRect(0,0,canvas.width,canvas.height);const scenario=simulations.pedestrian.scenario;const hasBus=simulations.pedestrian.hasBus;ctx.fillStyle='#404040';ctx.fillRect(0,canvas.height/2-50,canvas.width,100);ctx.fillStyle='#fff';for(let i=0;i<8;i++){ctx.fillRect(canvas.width/2-60+i*15,canvas.height/2-50,10,100);}if(scenario==='standard'){ctx.fillStyle='#ff4444';ctx.font='bold 14px Arial';ctx.textAlign='center';ctx.fillText('STANDARD: Kids wait for gaps, drivers may be distracted',canvas.width/2,30);ctx.fillStyle='#4169E1';for(let i=0;i<4;i++){ctx.beginPath();ctx.arc(canvas.width/2-90,90+i*25,9,0,2*Math.PI);ctx.fill();}ctx.fillStyle='#808080';for(let i=0;i<3;i++){ctx.fillRect(80+i*150,canvas.height/2-15,50,30);}if(hasBus){ctx.fillStyle='#8B4513';ctx.fillRect(canvas.width/2+80,canvas.height/2-45,70,35);}ctx.fillStyle='#666';ctx.font='12px Arial';ctx.fillText('Near‚Äëmiss conflicts likely around buses and mid‚Äëroad crossings',canvas.width/2,365);}else{ctx.fillStyle='#00cc66';ctx.font='bold 14px Arial';ctx.textAlign='center';ctx.fillText('SHIELDED: AI watches crosswalk + bus doors and blocks vehicles',canvas.width/2,30);ctx.fillStyle='#FFD700';ctx.beginPath();ctx.arc(canvas.width/2+110,80,18,0,2*Math.PI);ctx.fill();ctx.fillStyle='#000';ctx.font='bold 11px Arial';ctx.fillText('AI',canvas.width/2+110,83);ctx.fillStyle='#4169E1';for(let i=0;i<4;i++){ctx.beginPath();ctx.arc(canvas.width/2-40+i*25,canvas.height/2,9,0,2*Math.PI);ctx.fill();}ctx.fillStyle='#808080';ctx.fillRect(120,canvas.height/2-15,50,30);ctx.fillRect(520,canvas.height/2-15,50,30);if(hasBus){ctx.fillStyle='#8B4513';ctx.fillRect(canvas.width/2+70,canvas.height/2-45,80,35);ctx.strokeStyle='#FFD700';ctx.setLineDash([8,4]);ctx.beginPath();ctx.arc(canvas.width/2+110,canvas.height/2-25,70,0,2*Math.PI);ctx.stroke();ctx.setLineDash([]);}ctx.fillStyle='#00cc66';ctx.font='12px Arial';ctx.fillText('0 conflicts ¬∑ children cross in under 20 seconds',canvas.width/2,365);}}
        function addPedestrians(){simulations.pedestrian.scenario='shielded';drawPedestrianSimulation();}
        function addBus(){simulations.pedestrian.hasBus=true;drawPedestrianSimulation();}
        function drawBottleneckSimulation(){const canvas=document.getElementById('bottleneckCanvas');if(!canvas)return;const ctx=canvas.getContext('2d');canvas.width=canvas.offsetWidth;canvas.height=400;ctx.clearRect(0,0,canvas.width,canvas.height);const flow=Number(document.getElementById('flowSlider').value);const gates=Number(document.getElementById('gateSelect').value);const hasIncident=simulations.bottleneck.incident;const managed=simulations.bottleneck.managed;ctx.fillStyle='#404040';ctx.fillRect(50,canvas.height-100,60,80);ctx.fillStyle='#404040';ctx.fillRect(115,canvas.height-100,60,80);ctx.fillStyle='#fff';ctx.font='10px Arial';ctx.textAlign='center';ctx.fillText('Left',80,canvas.height-50);ctx.fillText('(Through)',80,canvas.height-38);ctx.fillText('Right',145,canvas.height-50);ctx.fillText('(Drop‚Äëoff)',145,canvas.height-38);ctx.fillStyle='#fff';ctx.font='bold 12px Arial';ctx.fillText('MAIN ROAD (2 lanes)',canvas.width/2,canvas.height-15);ctx.fillStyle='#e8f4f8';ctx.fillRect(60,40,canvas.width-120,220);ctx.strokeStyle='#0066cc';ctx.lineWidth=3;ctx.strokeRect(60,40,canvas.width-120,220);ctx.fillStyle='#0066cc';ctx.font='bold 14px Arial';ctx.textAlign='center';ctx.fillText('SCHOOL ZONE',canvas.width/2,60);ctx.fillStyle='#FFD700';ctx.fillRect(190,canvas.height-130,35,25);ctx.fillStyle='#000';ctx.font='bold 10px Arial';ctx.fillText('üö¶',207,canvas.height-118);ctx.font='8px Arial';ctx.fillText('Signal',207,canvas.height-108);if(!hasIncident){ctx.fillStyle='#10b981';ctx.font='13px Arial';ctx.fillText(`Normal ¬∑ Flow ${flow} cars/min ¬∑ Drop‚Äëoff lane queue: ${Math.floor(flow/10)} cars`,canvas.width/2,100);for(let i=0;i<gates;i++){ctx.fillStyle='#00cc66';ctx.fillRect(120+i*120,180,50,25);}ctx.fillStyle='#00cc66';ctx.fillRect(180,canvas.height-120,15,8);ctx.fillStyle='#fff';ctx.font='7px Arial';ctx.fillText('GREEN',187,canvas.height-114);ctx.fillStyle='#10b981';ctx.font='11px Arial';ctx.fillText('Signal GREEN ¬∑ Queue under control ¬∑ Main road clear',canvas.width/2,140);}else if(hasIncident&&!managed){ctx.fillStyle='#dc2626';ctx.font='13px Arial';ctx.fillText(`HIGH FLOW: ${flow} cars/min ¬∑ Drop‚Äëoff queue: 12+ cars`,canvas.width/2,100);ctx.fillStyle='#ef4444';ctx.beginPath();ctx.arc(canvas.width/2,160,20,0,2*Math.PI);ctx.fill();ctx.fillStyle='#fff';ctx.font='bold 16px Arial';ctx.fillText('!',canvas.width/2,166);ctx.fillStyle='#f97316';for(let i=0;i<12;i++){ctx.fillRect(250+i*30,190,25,15);}ctx.fillStyle='#ff4444';ctx.fillRect(180,canvas.height-120,15,8);ctx.fillStyle='#fff';ctx.font='7px Arial';ctx.fillText('RED',187,canvas.height-114);ctx.fillStyle='#dc2626';ctx.font='11px Arial';ctx.fillText('Signal RED ¬∑ Blocking new entries until queue clears to <5 cars',canvas.width/2,220);ctx.fillStyle='#ff4444';for(let i=0;i<3;i++){ctx.fillRect(120+i*25,canvas.height-90,20,15);}ctx.fillStyle='#dc2626';ctx.font='10px Arial';ctx.fillText('Without signal: would spill to main road',canvas.width/2,canvas.height-55);}else{ctx.fillStyle='#10b981';ctx.font='13px Arial';ctx.fillText('Signal management active ¬∑ Queue clearing',canvas.width/2,100);ctx.fillStyle='#f59e0b';ctx.beginPath();ctx.arc(canvas.width/2,160,18,0,2*Math.PI);ctx.fill();ctx.fillStyle='#fff';ctx.font='bold 14px Arial';ctx.fillText('‚úì',canvas.width/2,166);ctx.fillStyle='#ffaa00';for(let i=0;i<5;i++){ctx.fillRect(280+i*35,190,28,15);}ctx.fillStyle='#ff4444';ctx.fillRect(180,canvas.height-120,15,8);ctx.fillStyle='#fff';ctx.font='7px Arial';ctx.fillText('RED',187,canvas.height-114);ctx.strokeStyle='#10b981';ctx.setLineDash([6,3]);ctx.strokeRect(240,170,canvas.width-300,45);ctx.setLineDash([]);ctx.fillStyle='#10b981';ctx.font='10px Arial';ctx.fillText('Cars held here until space available',canvas.width/2,232);ctx.fillStyle='#10b981';for(let i=0;i<2;i++){ctx.fillRect(130+i*40,canvas.height-90,20,15);}ctx.fillStyle='#10b981';ctx.font='10px Arial';ctx.fillText('Left lane clear ¬∑ Emergency corridor protected',canvas.width/2,canvas.height-55);}}
        function createIncident(){simulations.bottleneck.incident=true;simulations.bottleneck.managed=false;drawBottleneckSimulation();}
        function activateManagement(){if(simulations.bottleneck.incident){simulations.bottleneck.managed=true;drawBottleneckSimulation();}}
        function submitPost(){const type=document.getElementById('postType').value;const title=document.getElementById('postTitle').value.trim();const content=document.getElementById('postContent').value.trim();if(!title||!content){alert('Please add a title and description.');return;}const container=document.getElementById('postsContainer');const div=document.createElement('div');div.className='post';div.dataset.type=type;const tagLabel=type==='unsafe'?'Unsafe Behaviour':type==='good'?'Good Practice':'Question';div.innerHTML=`<div class="post-header"><span class="post-author">You</span><span class="post-time">Just now</span></div><div><span class="tag">${tagLabel}</span></div><div class="post-title">${title}</div><div>${content}</div><div class="post-actions"><button class="post-action">üëç 0</button><button class="post-action">üí¨ 0</button></div>`;container.insertBefore(div,container.firstChild);document.getElementById('postTitle').value='';document.getElementById('postContent').value='';}
        function filterPosts(btn,type){document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));btn.classList.add('active');document.querySelectorAll('#postsContainer .post').forEach(p=>{p.style.display=(type==='all'||p.dataset.type===type)?'block':'none';});}
        let timelineTimer=null,timelineMinute=0;
        function playTimeline(){if(timelineTimer){clearInterval(timelineTimer);timelineTimer=null;timelineMinute=0;}const peak=document.getElementById('peakSelect').value;const msg=document.getElementById('timelineMessage');const timeInd=document.getElementById('timeIndicator');msg.textContent='Starting 5‚Äëminute story‚Ä¶';timeInd.textContent='T+0 min';timelineTimer=setInterval(()=>{timelineMinute++;timeInd.textContent='T+'+timelineMinute+' min';if(timelineMinute===1){msg.textContent='Parents start arriving; pickup flow engine activates micro‚Äëslots.';openSimulation('pickup');simulations.pickup.scenario='after';drawPickupSimulation();}else if(timelineMinute===2){msg.textContent='Pedestrian surge at crossings; shielded mode enabled.';openSimulation('pedestrian');simulations.pedestrian.scenario='shielded';drawPedestrianSimulation();}else if(timelineMinute===3){msg.textContent='Minor incident predicted inside campus; digital twin forecasts spillback.';openSimulation('bottleneck');createIncident();}else if(timelineMinute===4){msg.textContent='Management strategy applied ¬∑ main road kept free.';activateManagement();}else if(timelineMinute===5){msg.textContent='Peak ends; all systems return to monitoring mode ('+peak+').';clearInterval(timelineTimer);}},1200);}
        updateHeatScore();
        switchActor(document.querySelector('.tab-btn[data-role="parent"]'));
    </script>
</body>
</html>
